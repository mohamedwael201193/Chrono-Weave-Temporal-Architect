"use strict";var E,_=require("react/jsx-runtime"),N=require("react"),S=require("./useWallets.js"),A=require("./privy-context.js");function C({src:E,...N}){return _.jsx("img",{src:E,...N,style:{display:"none"}})}exports.ModalScreen=void 0,(E=exports.ModalScreen||(exports.ModalScreen={})).LANDING="LANDING",E.CONNECT_OR_CREATE="CONNECT_OR_CREATE",E.AWAITING_CONNECTION="AWAITING_CONNECTION",E.AWAITING_FARCASTER_CONNECTION="AWAITING_FARCASTER_CONNECTION",E.AWAITING_FARCASTER_SIGNER="AWAITING_FARCASTER_SIGNER",E.AWAITING_OAUTH_SCREEN="AWAITING_OAUTH_SCREEN",E.CROSS_APP_AUTH_SCREEN="CROSS_APP_AUTH_SCREEN",E.AWAITING_PASSWORDLESS_CODE="AWAITING_PASSWORDLESS_CODE",E.AWAITING_PASSKEY_SYSTEM_DIALOGUE="AWAITING_PASSKEY_SYSTEM_DIALOGUE",E.LINK_EMAIL_SCREEN="LINK_EMAIL_SCREEN",E.LINK_PHONE_SCREEN="LINK_PHONE_SCREEN",E.LINK_WALLET_SCREEN="LINK_WALLET_SCREEN",E.LINK_PASSKEY_SCREEN="LINK_PASSKEY_SCREEN",E.UPDATE_EMAIL_SCREEN="UPDATE_EMAIL_SCREEN",E.UPDATE_PHONE_SCREEN="UPDATE_PHONE_SCREEN",E.AWAITING_CONNECT_ONLY_CONNECTION="AWAITING_CONNECT_ONLY_CONNECTION",E.CONNECT_ONLY_LANDING_SCREEN="CONNECT_ONLY_LANDING_SCREEN",E.CONNECT_ONLY_AUTHENTICATED_SCREEN="CONNECT_ONLY_AUTHENTICATED_SCREEN",E.LOGIN_FAILED_SCREEN="LOGIN_FAILED_SCREEN",E.ALLOWLIST_REJECTION_SCREEN="ALLOWLIST_REJECTION_SCREEN",E.ACCOUNT_NOT_FOUND_SCREEN="ACCOUNT_NOT_FOUND_SCREEN",E.USER_LIMIT_REACHED_SCREEN="USER_LIMIT_REACHED_SCREEN",E.EMBEDDED_WALLET_ON_ACCOUNT_CREATE_SCREEN="EMBEDDED_WALLET_ON_ACCOUNT_CREATE_SCREEN",E.EMBEDDED_WALLET_CREATED_SCREEN="EMBEDDED_WALLET_CREATED_SCREEN",E.EMBEDDED_WALLET_CONNECTING_SCREEN="EMBEDDED_WALLET_CONNECTING_SCREEN",E.EMBEDDED_WALLET_PASSWORD_RECOVERY_SCREEN="EMBEDDED_WALLET_PASSWORD_RECOVERY_SCREEN",E.EMBEDDED_WALLET_KEY_EXPORT_SCREEN="EMBEDDED_WALLET_KEY_EXPORT_SCREEN",E.EMBEDDED_WALLET_SEND_TRANSACTION_SCREEN="EMBEDDED_WALLET_SEND_TRANSACTION_SCREEN",E.EMBEDDED_WALLET_SEND_SOLANA_TRANSACTION_SCREEN="EMBEDDED_WALLET_SEND_SOLANA_TRANSACTION_SCREEN",E.EMBEDDED_WALLET_SIGN_REQUEST_SCREEN="EMBEDDED_WALLET_SIGN_REQUEST_SCREEN",E.EMBEDDED_WALLET_PASSWORD_UPDATE_SPLASH_SCREEN="EMBEDDED_WALLET_PASSWORD_UPDATE_SPLASH_SCREEN",E.EMBEDDED_WALLET_PASSWORD_CREATE_SCREEN="EMBEDDED_WALLET_PASSWORD_CREATE_SCREEN",E.EMBEDDED_WALLET_PASSWORD_UPDATE_SCREEN="EMBEDDED_WALLET_PASSWORD_UPDATE_SCREEN",E.EMBEDDED_WALLET_RECOVERY_SELECTION_SCREEN="EMBEDDED_WALLET_RECOVERY_SELECTION_SCREEN",E.EMBEDDED_WALLET_RECOVERY_OAUTH_SCREEN="EMBEDDED_WALLET_RECOVERY_OAUTH_SCREEN",E.EMBEDDED_WALLET_SET_AUTOMATIC_RECOVERY_SCREEN="EMBEDDED_WALLET_SET_AUTOMATIC_RECOVERY_SCREEN",E.EMBEDDED_WALLET_DELEGATED_ACTIONS_CONSENT_SCREEN="EMBEDDED_WALLET_DELEGATED_ACTIONS_CONSENT_SCREEN",E.INSTALL_PHANTOM_SCREEN="INSTALL_PHANTOM_SCREEN",E.PHANTOM_INTERSTITIAL_SCREEN="PHANTOM_INTERSTITIAL_SCREEN",E.AFFIRMATIVE_CONSENT_SCREEN="AFFIRMATIVE_CONSENT_SCREEN",E.FUNDING_METHOD_SELECTION_SCREEN="FUNDING_METHOD_SELECTION_SCREEN",E.FUNDING_TRANSFER_FROM_WALLET_SCREEN="FUNDING_TRANSFER_FROM_WALLET_SCREEN",E.FUNDING_AWAITING_TRANSFER_FROM_EXTERNAL_WALLET_SCREEN="FUNDING_AWAITING_TRANSFER_FROM_EXTERNAL_WALLET_SCREEN",E.FUNDING_MANUAL_TRANSFER_SCREEN="FUNDING_MANUAL_TRANSFER_SCREEN",E.MOONPAY_PROMPT_SCREEN="MOONPAY_PROMPT_SCREEN",E.MOONPAY_STATUS_SCREEN="MOONPAY_STATUS_SCREEN",E.COINBASE_ONRAMP_STATUS_SCREEN="COINBASE_ONRAMP_STATUS_SCREEN",E.MFA_ENROLLMENT_FLOW_SCREEN="MFA_ENROLLMENT_FLOW_SCREEN",E.CAPTCHA_SCREEN="CAPTCHA_SCREEN",E.ERROR_SCREEN="ERROR_SCREEN",E.IN_APP_BROWSER_LOGIN_NOT_POSSIBLE="IN_APP_BROWSER_LOGIN_NOT_POSSIBLE",E.TELEGRAM_AUTH_SCREEN="TELEGRAM_AUTH_SCREEN",E.LINK_CONFLICT_SCREEN="LINK_CONFLICT_SCREEN";const R=N.createContext({ready:!1,app:S.DEFAULT_APP_CONFIG,currentScreen:null,lastScreen:null,navigate:A.notImplemented,navigateBack:A.notImplemented,resetNavigation:A.notImplemented,setModalData:A.notImplemented,onUserCloseViaDialogOrKeybindRef:void 0});let T=[exports.ModalScreen.LANDING,exports.ModalScreen.CONNECT_ONLY_LANDING_SCREEN,null];exports.ModalProvider=E=>{let A=S.useAppConfig(),e=E.authenticated,[D,L]=N.useState(E.initialScreen);N.useEffect((()=>{e||T.includes(E.initialScreen)||E.setInitialScreen(null)}),[e]);let O=N.useRef(null);N.useEffect((()=>{E.open||(O.current=null)}),[E.open]),N.useEffect((()=>{O.current=null}),[E.initialScreen]);let I={ready:!!A.id,app:A,data:E.data,setModalData:E.setModalData,currentScreen:E.initialScreen,lastScreen:D,navigate:(_,N=!0)=>{E.setInitialScreen(_),N&&L(E.initialScreen)},navigateBack:()=>{E.setInitialScreen(D)},resetNavigation:()=>{E.setInitialScreen(null),L(null)},onUserCloseViaDialogOrKeybindRef:O};return _.jsxs(R.Provider,{value:I,children:[("string"==typeof A.appearance.logo||"img"===A.appearance.logo?.type)&&_.jsx(C,{src:"string"==typeof A.appearance.logo?A.appearance.logo:A.appearance.logo.props.src}),E.children]})},exports.getEmbeddedConnectedWallet=function(E){return E.find((E=>"privy"===E.walletClientType&&"embedded"===E.connectorType&&!E.imported))??null},exports.usePrivyModal=()=>N.useContext(R);
